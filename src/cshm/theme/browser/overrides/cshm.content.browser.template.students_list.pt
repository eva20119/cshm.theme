<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    lang="en"
    metal:use-macro="context/main_template/macros/master"
    i18n:domain="cshm.content">
<body>


<metal:style fill-slot="style_slot">
    <link rel="stylesheet" type="text/css" href="${portal_url}/++plone++cshm.theme/backend.css">
</metal:style>
<metal:js fill-slot="javascript_head_slot">
    <script type="text/javascript" src="${portal_url}/++plone++cshm.theme/backend.js"></script>
</metal:js>

<metal:content-core fill-slot="content-core">
<metal:content-core define-macro="content-core"
                    tal:define="toc context/table_of_contents|nothing;">

<h3>學生名單: ${python:context.getParentNode().title} / ${context/title}</h3>

<h4>正取學員</h4>
<a id="admit-batch-numbering" href="javascript:void(0)">批次編號</a> |
<a id="teacher-selector" target="_blank" href="@@teacher_selector">老師遴選</a>


<hr>
<input name="url" class="to-url" type="text" placeholder="請輸入下載專區網址" style="width: 300px; float:left">
<a class="to-url" href="javascript:void(0)" >匯出至下載專區</a>
<hr>


<table border="1" id="ctable" cellspacing="0" cellpadding="0">
  <thead>
    <tr class="tr-title">
      <td>座號</td>
      <td>姓名</td>
      <td>聯絡電話</td>
      <td>承辦人</td>
      <td>發送mail</td>
      <td>繳費狀況</td>
      <td>新增聯絡紀錄</td>
      <td>查看</td>
    </tr>
  </thead>
  <tbody>
    <tr tal:repeat="item view/admit">
      <td>${item/seatNo}</td>
      <td>${item/name}</td>
      <td>電話:${item/phone}<br />手機:${item/cellphone}</td>
      <td>TODO</td>
      <td>${item/priv-email}</td>
      <td>TODO</td>
      <td>
          <input type="text" name='contactLog' style="width:80%; float:left" id="log-data-${item/id}"/>
          <a href="javascript:void(0)" class="add-log" data-id="${item/id}">新增</a>
      </td>
      <td>
          <a href="javascript:void(0)"
             id="view-log-${item/id}"
             class="view-log"
             data-id="${item/id}"
             data-log="${item/contactLog}">查看聯絡記錄</a>
      </td>
    </tr>
  </tbody>
</table>

<hr>
<h4>備取學員</h4>
<a id="all-trans-to-admit" href="javascript:void(0)">全部轉為正取(只能進行一次)</a>
<table border="1" id="ctable" cellspacing="0" cellpadding="0">
  <thead>
    <tr class="tr-title">
      <td>備取</td>
      <td>姓名</td>
      <td>聯絡電話</td>
      <td>承辦人</td>
      <td>發送mail</td>
      <td>繳費狀況</td>
      <td>新增聯絡紀錄</td>
      <td>查看</td>
      <td>轉正取</td>
    </tr>
  </thead>
  <tbody>
    <tr tal:repeat="item view/waiting">
      <td>${item/isAlt}</td>
      <td>${item/name}</td>
      <td>電話:${item/phone}<br />手機:${item/cellphone}</td>
      <td>TODO</td>
      <td>${item/priv-email}</td>
      <td>TODO</td>
      <td>
          <input type="text" name='contactLog' style="width:80%; float:left" id="log-data-${item/id}"/>
          <a href="javascript:void(0)" class="add-log" data-id="${item/id}">新增</a>
      </td>
      <td>
          <a href="javascript:void(0)" 
             id="view-log-${item/id}"
             class="view-log" 
             data-id="${item/id}"
             data-log="${item/contactLog}">查看聯絡記錄</a>
      </td>
      <td>
          <a class="waiting-trans-to-admit" data-id="${item/id}" href="javascript:void(0)">轉正取</a>
      </td>
    </tr>
  </tbody>
</table>


</metal:content-core>
</metal:content-core>

</body>
</html>
